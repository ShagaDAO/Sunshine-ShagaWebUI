<!DOCTYPE html>
<html lang="en">

<head>
  <%- header %>
</head>

<body id="app" v-cloak>
  <main role="main" style="max-width: 1200px; margin: 1em auto">
    <div class="d-flex gap-4">
      <div class="card p-2">
        <header>
          <h1 class="mb-0">
            Shaga Web UI
          </h1>
        </header>
      </div>
      <div>
        <pre>{{ JSON.stringify(apps, null, 2) }}</pre>
        <pre>{{ JSON.stringify(config, null, 2) }}</pre>
        <pre>{{ JSON.stringify(configLocale, null, 2) }}</pre>
        <pre>{{ logs }}</pre>
      </div>
    </div>
  </main>
</body>

<script type="module">
  import { createApp } from "vue"
  

  let app = createApp({
    components: {
      
    },
    data() {
      return {
        apps: [],        
        config: {},
        logs: '',
        configLocale: {}
      };
    },
    methods: {
      
    },
    created() {
      fetch("/api/apps")
        .then((r) => r.json())
        .then((r) => {
          console.log(r);
          this.apps = r.apps;
        });

      fetch("/api/config")
        .then(r => r.json())
        .then(r => this.config = r);

      fetch("/api/logs",)
        .then((r) => r.text())
        .then((r) => {
          this.logs = r;
        });

      fetch("/api/configLocale",)
        .then((r) => r.json())
        .then((r) => {
          this.logs = r;
        });
        
    }
  });

  app.mount('#app');
</script>
